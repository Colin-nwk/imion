<div class="container">
  <!-- Button trigger modal -->
  <div class="row">
    <div class="col-lg-9 align-self-center">
      <div class="row">
        <div class="col-lg-12">
          <form id="contact" action="/contact-form" method="post">
            <div class="row">
              <div class="col-lg-12" id="test">
                <h2>Let's get in touch</h2>
              </div>
              <div class="col-lg-4">
                <input name="name" type="text" id="name" placeholder="YOURNAME...*" required="" />

              </div>
              <div class="col-lg-4">
                <fieldset>
                  <input name="email" type="text" id="email" pattern="[^ @]*@[^ @]*" placeholder="YOUR EMAIL..." required="" />
                </fieldset>
              </div>
              <div class="col-lg-4">
                <fieldset>
                  <input name="subject" type="text" id="subject" placeholder="SUBJECT...*" required="" />
                </fieldset>
              </div>
              <div class="col-lg-12">
                <fieldset>
                  <textarea name="message" type="text" class="form-control" id="message" placeholder="YOUR MESSAGE..." required=""></textarea>
                </fieldset>
              </div>
              <div class="col-lg-12">
                <fieldset>
                  <button type="submit" id="form-submit" class="button">
                    SEND MESSAGE NOW
                  </button>
                </fieldset>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>

    <div class="col-lg-3">
      <div class="right-info">
        <ul>
          <li>
            <h6>Phone Number</h6>
            <span><%= InfoContent[0].phone  %></span>
          </li>
          <li>
            <h6>Email Address</h6>
            <span><%= InfoContent[0].email  %></span>
          </li>
          <li>
            <h6>Street Address</h6>
            <span><%= InfoContent[0].address  %></span>
          </li>
          <li>
            <h6>Website URL</h6>
            <span><%= InfoContent[0].url  %></span>
          </li>
        </ul>
      </div>
    </div>

  </div>
</div>

<script>
  document.getElementById('contact').addEventListener('submit', async (event) => {
    event.preventDefault();
    const formData = new FormData(event.target);
    const submitButton = document.getElementById('form-submit');
    const test = document.getElementById('test');
    try {
      submitButton.innerHTML = 'Sending......';
      submitButton.disabled = true;

      const response = await fetch('/contact-form', {
        method: 'POST',
        body: formData,
      });
      if (response.ok) {

        event.target.reset();
        showToast('Thank you for reaching out, our support team will get back to you', 'success');
      } else {
        showToast('An error occurred, try again', 'error');
      }
    } catch (error) {
      console.log(error)
      showToast('An error occurred', 'error');
    } finally {
      submitButton.innerHTML = 'SEND MESSAGE NOW';
      submitButton.disabled = false;
    }

    function showToast(message, type) {

      const toast = document.createElement('div');
      toast.classList.add('toast', `toast-${type}`);
      toast.textContent = message;

      const body = document.body;
      body.appendChild(toast);

      setTimeout(() => {
        body.removeChild(toast);
      }, 10000);
    }
  });
</script>

<style>
  .toast {
    z-index: 200;
    position: fixed;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    padding: 12px 24px;
    color: #ffffff;
    border-radius: 10px;
    z-index: 1000;
    opacity: 0;
    animation: fadeInOut 10s ease-in-out;
  }

  .toast-success {
    background-color: #4caf50;
  }

  .toast-error {
    background-color: #f44336;
  }

  @keyframes fadeInOut {
    0% {
      opacity: 0;
    }

    10% {
      opacity: 1;
    }

    90% {
      opacity: 1;
    }

    100% {
      opacity: 0;
    }
  }
</style>